{"version":3,"file":"index.js","sources":["../src/js/logger.js","../src/js/listeners.js","../src/js/store.js"],"sourcesContent":["// @flow\nfunction logger<T>(state: T, newState: T): void {\n  console.group(\"Logger\");\n  console.log(\"State:\", JSON.stringify(state, null, 2));\n  console.log(\"New State\", JSON.stringify(newState, null, 2));\n  console.groupEnd();\n}\n\nexport default logger;\n","// @flow\nfunction applyListeners<T>(listeners: Function[], oldTarget: T, target: T) {\n    listeners.forEach(listener => {\n        if (typeof listener === \"function\") {\n          listener(oldTarget, target);\n        } else {\n          throw new Error(\"Listener must be a function!\");\n        }\n      });\n}\n\nexport default applyListeners;","// @flow\n\"use strict\";\n\nimport applayListeners from './listeners';\n\nexport default (initialState: any = {}, ...listeners: Function[]) => {\n  const handler = {\n    set: (target, name, value) => {\n      const oldTarget = Object.assign({}, target);\n      Reflect.set(target, name, value);\n      applayListeners(listeners, oldTarget, target);\n      return true;\n    }\n  };\n  const store = new Proxy({}, handler);\n\n  const getStore = () => {\n    return Object.assign({}, store);\n  };\n\n  const setStore = (state: any) => {\n    Object.keys(state).forEach(key => {\n      Reflect.set(store, key, state[key]);\n    });\n    return Object.assign({}, store, state);\n  };\n\n  const find = (key: string) => {\n    return Reflect.get(store, key);\n  }\n\n  setStore(initialState);\n\n  return {\n    getStore,\n    setStore,\n    find\n  };\n};\n"],"names":["logger","state","newState","console","group","log","JSON","stringify","groupEnd","applyListeners","listeners","oldTarget","target","forEach","listener","Error","initialState","store","Proxy","set","name","value","Object","assign","Reflect","applayListeners","setStore","keys","key","getStore","find","get"],"mappings":"aACA,SAASA,OAAUC,EAAUC,GAC3BC,QAAQC,MAAM,UACdD,QAAQE,IAAI,SAAUC,KAAKC,UAAUN,EAAO,KAAM,IAClDE,QAAQE,IAAI,YAAaC,KAAKC,UAAUL,EAAU,KAAM,IACxDC,QAAQK,WCJV,SAASC,eAAkBC,EAAuBC,EAAcC,GAC5DF,EAAUG,QAAQ,SAAAC,MACU,mBAAbA,QAGH,IAAIC,MAAM,gCAFhBD,EAASH,EAAWC,4DCC9B,6BAAgBI,yDAAoB,sBAAON,mCAAAA,wBASnCO,EAAQ,IAAIC,MAAM,GARR,CACdC,IAAK,SAACP,EAAQQ,EAAMC,OACZV,EAAYW,OAAOC,OAAO,GAAIX,UACpCY,QAAQL,IAAIP,EAAQQ,EAAMC,GAC1BI,eAAgBf,EAAWC,EAAWC,IAC/B,KASLc,EAAW,SAACzB,UAChBqB,OAAOK,KAAK1B,GAAOY,QAAQ,SAAAe,GACzBJ,QAAQL,IAAIF,EAAOW,EAAK3B,EAAM2B,MAEzBN,OAAOC,OAAO,GAAIN,EAAOhB,WAOlCyB,EAASV,GAEF,CACLa,SAlBe,kBACRP,OAAOC,OAAO,GAAIN,IAkBzBS,SAAAA,EACAI,KATW,SAACF,UACLJ,QAAQO,IAAId,EAAOW"}